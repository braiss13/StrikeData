@page
@model StrikeData.Pages.TeamData.PitchingModel
@{
    ViewData["Title"] = "Pitching Stats";
}

<h2 class="text-center">Pitching Stats</h2>

<!-- Botones para alternar entre vistas -->
<div class="btn-group mb-3 " role="group">
    <button id="basicBtn" type="button" class="btn-stat-toggle" onclick="showTable('basic')">Basic</button>
    <button id="advancedBtn" type="button" class="btn-stat-toggle inactive" onclick="showTable('advanced')">Advanced</button>
</div>

<!-- Tabla b치sica (MLB hasta AVG) -->
<div id="basicTable">
    <table class="table table-striped table-bordered table-sm">
        <thead>
            <tr>
                <th>Team</th>
                <th>Games</th>
                @foreach (var statName in Model.BasicStatNames)
                {
                    <th>@statName</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var row in Model.TeamPitchingStats)
            {
                <tr>
                    <td>@row.TeamName</td>
                    <td>@row.Games</td>
                    @foreach (var statName in Model.BasicStatNames)
                    {
                        float? val;
                        row.Stats.TryGetValue(statName, out val);
                        <td>@(val.HasValue ? val.Value.ToString("0.##") : "-")</td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Tabla avanzada (resto de MLB + TeamRankings) -->
<div id="advancedTable" style="display:none;">
    <table class="table table-striped table-bordered table-sm pitching-table">
        <thead>
            <tr>
                <th>Team</th>
                <th>Games</th>
                @foreach (var statName in Model.AdvancedStatNames)
                {
                    <th>@statName</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var row in Model.TeamPitchingStats)
            {
                <tr>
                    <td>@row.TeamName</td>
                    <td>@row.Games</td>
                    @foreach (var statName in Model.AdvancedStatNames)
                    {
                        float? val;
                        row.Stats.TryGetValue(statName, out val);
                        <td>@(val.HasValue ? val.Value.ToString("0.##") : "-")</td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>


<script>

function showTable(type) {
    document.getElementById('basicTable').style.display = (type === 'basic') ? 'block' : 'none';
    document.getElementById('advancedTable').style.display = (type === 'advanced') ? 'block' : 'none';

    // resaltar bot칩n activo
    const basicBtn = document.getElementById('basicBtn');
    const advancedBtn = document.getElementById('advancedBtn');
    if (type === 'basic') {
        basicBtn.classList.remove('inactive');
        advancedBtn.classList.add('inactive');
    } else {
        basicBtn.classList.add('inactive');
        advancedBtn.classList.remove('inactive');
    }
}

// Mostrar tabla b치sica por defecto al cargar la p치gina
showTable('basic');

</script>

